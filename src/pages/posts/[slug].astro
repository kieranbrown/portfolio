---
import { getCollection } from "astro:content";
import Layout from "../../layouts/post.astro";

const { slug } = Astro.params;

const post = await getCollection("posts").then((posts) =>
  posts.find((post) => post.slug === slug),
);

if (!post) {
  return new Response(null, {
    status: 404,
    statusText: "Not Found",
  });
}

const { Content } = await post.render();
---

<Layout post={post}>
  <Content />
</Layout>
